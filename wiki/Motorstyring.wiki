#summary Beskrivelse af hvordan motorerne styres


Motorerne styres i skridt i et plant Euklidisk koordinatsystem. Vi har foreløbig kun brug for at kunne styre tegneren i rette linier.

Processoren kører med frekvensen 16 MHz. Motorerne kan styres ved at lave parameterfremstilling af linien (x(t) og y(t)) og lade motorkontrollen sørge for, at motorerne befinder sig på det givne sted til det givne tidspunkt.

For hvert motorkontroltaktslag beregner motorkontrollen x- og y-motorernes position fra liniens parameterfremstilling og flytter motorerne derhen. Hastigheden er på forhånd defineret og skal også regnes med.

*NB: Det er vigtigt, at motorernes fart er så lille i forhold til motorkontrolfrekvensen, at der højst køres ét skridt med hver motor pr. motorkontroltaktslag.* Det tilstræbes derfor, at motorhastigheden er relativt lille (minimum sættes af hvorvidt produktionen er rentabel) og at motorkontrolfrekvensen er stor (maksimum sættes ved, at hele regningsoperationen skal være overstået på ét taktslag).

WCET (worst-case execution time) kan findes ved at omsætte den mængde kode, der skal ekserkveres pr. motorkontroltaktslag, til instruktioner. Instruktionerne tælles. AVR-processoren kan håndtere ca. 16 MIPS (million instruction per second) ved 16 MHz - se afsnit 6.6 Instruction Execution Time i databladet. Derpå kan man finde det antal CPU-taktslag, der skal bruges på at regne motorstyringen ud.

*Foreløbigt estimat:* 4 MHz motorkontrolfrekvens, 4 mio. instruktioner pr. taktslag. Det må kunne lade sig gøre at afvikle motorberegningen på 4 mio. instruktioner. Maksimal hastighed er 1 step pr. taktslag. For en af motorerne er opløsningen ~0,06 mm/step; det giver en tophastighed på 0.006 mm `*` 4e6 Hz = *240 m/s* - denne tophastighed er langt over den realistiske tophastighed.